{
  "/contracts": {
    "get": {
      "tags": ["Contracts"],
      "summary": "Get all contracts",
      "description": "Retrieves all active (non-deleted) contracts from the database. Each contract record includes related entities such as customer, contract type, package, addons, dresses, and electronic signature link. This endpoint is typically used to populate dashboards or management tables with all contracts.",
      "operationId": "getAllContracts",
      "parameters": [
        {
          "name": "status",
          "in": "query",
          "required": false,
          "schema": { "type": "string", "example": "SIGNED" },
          "description": "Optional filter by contract status (e.g., SIGNED, PENDING_SIGNATURE, CANCELLED)."
        },
        {
          "name": "limit",
          "in": "query",
          "required": false,
          "schema": { "type": "integer", "example": 50 },
          "description": "Maximum number of contracts to return."
        },
        {
          "name": "offset",
          "in": "query",
          "required": false,
          "schema": { "type": "integer", "example": 0 },
          "description": "Number of records to skip before starting to collect the result set."
        }
      ],
      "responses": {
        "200": {
          "description": "âœ… Successfully retrieved all active contracts",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["success", "data"],
                "properties": {
                  "success": { "type": "boolean", "example": true },
                  "data": {
                    "type": "array",
                    "description": "List of contracts with all associated details.",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "string", "format": "uuid" },
                        "contract_number": { "type": "string" },
                        "status": {
                          "type": "string",
                          "enum": ["DRAFT", "PENDING_SIGNATURE", "SIGNED", "CANCELLED", "EXPIRED"],
                          "example": "SIGNED"
                        },
                        "start_datetime": { "type": "string", "format": "date-time" },
                        "end_datetime": { "type": "string", "format": "date-time" },
                        "deposit_payment_method": {
                          "type": "string",
                          "enum": ["cash", "card", "transfer"],
                          "example": "card"
                        },
                        "account_ht": { "type": "number", "example": 400.0 },
                        "account_ttc": { "type": "number", "example": 480.0 },
                        "caution_ht": { "type": "number", "example": 100.0 },
                        "caution_ttc": { "type": "number", "example": 120.0 },
                        "total_price_ht": { "type": "number", "example": 500.0 },
                        "total_price_ttc": { "type": "number", "example": 600.0 },
                        "customer": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "string", "format": "uuid" },
                            "firstname": { "type": "string", "example": "Emma" },
                            "lastname": { "type": "string", "example": "Dupont" },
                            "email": { "type": "string", "format": "email", "example": "emma.dupont@email.fr" },
                            "phone": { "type": "string", "example": "+33612345678" }
                          }
                        },
                        "contract_type": {
                          "type": "object",
                          "properties": {
                            "id": { "type": "string", "format": "uuid" },
                            "name": { "type": "string", "example": "Location par jour" }
                          }
                        },
                        "package": {
                          "type": ["object", "null"],
                          "properties": {
                            "id": { "type": "string", "format": "uuid" },
                            "name": { "type": "string", "example": "Forfait Ã‰lÃ©gance" },
                            "price_ht": { "type": "number", "example": 500 },
                            "price_ttc": { "type": "number", "example": 600 }
                          }
                        },
                        "addon_links": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "addon": {
                                "type": "object",
                                "properties": {
                                  "id": { "type": "string", "format": "uuid" },
                                  "name": { "type": "string", "example": "Retouche coiffure" },
                                  "price_ttc": { "type": "number", "example": 80 },
                                  "included": { "type": "boolean", "example": false }
                                }
                              }
                            }
                          }
                        },
                        "dresses": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "dress": {
                                "type": "object",
                                "properties": {
                                  "id": { "type": "string", "format": "uuid" },
                                  "name": { "type": "string", "example": "Robe de mariÃ©e Ã‰lÃ©gance" },
                                  "price_per_day_ttc": { "type": "number", "example": 120 }
                                }
                              }
                            }
                          }
                        },
                        "sign_link": {
                          "type": ["object", "null"],
                          "description": "Electronic signature link associated with this contract.",
                          "properties": {
                            "token": { "type": "string", "example": "9c9a6b14-1e8e-48cd-bf8b-cb8dcf9df8d3" },
                            "expires_at": { "type": "string", "format": "date-time" }
                          }
                        },
                        "created_at": { "type": "string", "format": "date-time" },
                        "updated_at": { "type": ["string", "null"], "format": "date-time" }
                      }
                    }
                  }
                }
              },
              "examples": {
                "default": {
                  "summary": "Example: Successful response",
                  "value": {
                    "success": true,
                    "data": [
                      {
                        "id": "f123e456-789b-12d3-a456-426614174000",
                        "contract_number": "CTR-2025-004",
                        "status": "SIGNED",
                        "start_datetime": "2025-06-01T10:00:00.000Z",
                        "end_datetime": "2025-06-03T10:00:00.000Z",
                        "deposit_payment_method": "card",
                        "account_ht": 400,
                        "account_ttc": 480,
                        "caution_ht": 100,
                        "caution_ttc": 120,
                        "total_price_ht": 500,
                        "total_price_ttc": 600,
                        "customer": { "firstname": "Emma", "lastname": "Dupont" },
                        "contract_type": { "name": "Location par jour" },
                        "package": null,
                        "addon_links": [],
                        "dresses": [],
                        "sign_link": { "token": "9c9a6b14-1e8e-48cd-bf8b-cb8dcf9df8d3" },
                        "created_at": "2025-05-30T10:00:00.000Z"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "500": {
          "description": "ðŸ’¥ Internal server error - Failed to fetch contracts",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "success": { "type": "boolean", "example": false },
                  "error": { "type": "string", "example": "Failed to fetch contracts" }
                }
              }
            }
          }
        }
      },
      "security": [
        {
          "bearerAuth": []
        }
      ]
    }
  }
}