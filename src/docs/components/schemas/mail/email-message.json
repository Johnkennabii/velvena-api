{
  "EmailMessage": {
    "type": "object",
    "properties": {
      "id": {
        "type": "string",
        "description": "Identifiant unique de l'email (messageId)",
        "example": "<CABc123xyz@mail.example.com>"
      },
      "uid": {
        "type": "integer",
        "description": "UID IMAP de l'email",
        "example": 12345
      },
      "subject": {
        "type": "string",
        "description": "Sujet de l'email",
        "example": "Confirmation de votre commande"
      },
      "from": {
        "type": "array",
        "description": "Expéditeur(s) de l'email",
        "items": {
          "type": "object",
          "properties": {
            "address": {
              "type": "string",
              "format": "email",
              "example": "contact@velvena.fr"
            },
            "name": {
              "type": "string",
              "example": "Velvena"
            }
          }
        }
      },
      "to": {
        "type": "array",
        "description": "Destinataire(s) de l'email",
        "items": {
          "type": "object",
          "properties": {
            "address": {
              "type": "string",
              "format": "email",
              "example": "client@example.com"
            },
            "name": {
              "type": "string",
              "example": "Marie Dupont"
            }
          }
        }
      },
      "date": {
        "type": "string",
        "format": "date-time",
        "description": "Date d'envoi de l'email",
        "example": "2025-11-19T14:30:00.000Z"
      },
      "html": {
        "type": "string",
        "description": "Corps de l'email en HTML",
        "example": "<html><body><h1>Bonjour</h1></body></html>"
      },
      "text": {
        "type": "string",
        "description": "Corps de l'email en texte brut",
        "example": "Bonjour,\n\nVotre commande a été confirmée."
      },
      "attachments": {
        "type": "array",
        "description": "Pièces jointes de l'email",
        "items": {
          "type": "object",
          "properties": {
            "filename": {
              "type": "string",
              "example": "facture.pdf"
            },
            "contentType": {
              "type": "string",
              "example": "application/pdf"
            },
            "size": {
              "type": "integer",
              "description": "Taille en octets",
              "example": 102400
            }
          }
        }
      },
      "flags": {
        "type": "array",
        "description": "Flags IMAP de l'email",
        "items": {
          "type": "string"
        },
        "example": ["\\Seen", "\\Flagged"]
      },
      "hasAttachments": {
        "type": "boolean",
        "description": "Indique si l'email contient des pièces jointes",
        "example": true
      }
    }
  }
}
