{
  "/auth/login": {
    "post": {
      "tags": ["Auth"],
      "summary": "Authenticate user and issue JWT",
      "description": "Authenticates a user using their email and password. If credentials are valid, a signed JWT is returned (valid for 6 hours). The user's last login timestamp (`last_signin_at`) is updated automatically. The response also includes the user ID, email, and role.",
      "operationId": "loginUser",
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "required": ["email", "password"],
              "properties": {
                "email": {
                  "type": "string",
                  "format": "email",
                  "example": "emma.dupont@example.com",
                  "description": "User's email address used for authentication."
                },
                "password": {
                  "type": "string",
                  "format": "password",
                  "example": "StrongPass!2025",
                  "description": "User's plaintext password. It will be verified against the hashed password stored in database."
                }
              }
            },
            "examples": {
              "validCredentials": {
                "summary": "Valid credentials",
                "value": {
                  "email": "emma.dupont@example.com",
                  "password": "StrongPass!2025"
                }
              },
              "invalidCredentials": {
                "summary": "Invalid password",
                "value": {
                  "email": "emma.dupont@example.com",
                  "password": "wrongPassword123"
                }
              }
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "‚úÖ User successfully authenticated",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["token", "id", "email", "role"],
                "properties": {
                  "token": {
                    "type": "string",
                    "description": "JWT access token valid for 6 hours",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  },
                  "id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Unique identifier of the authenticated user",
                    "example": "1a2b3c4d-5e6f-7890-abcd-ef1234567890"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "emma.dupont@example.com"
                  },
                  "role": {
                    "type": ["string", "null"],
                    "example": "ADMIN",
                    "description": "User's assigned role name (may be null if no role is associated)"
                  }
                }
              },
              "examples": {
                "success": {
                  "summary": "Successful login response",
                  "value": {
                    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
                    "id": "1a2b3c4d-5e6f-7890-abcd-ef1234567890",
                    "email": "emma.dupont@example.com",
                    "role": "ADMIN"
                  }
                }
              }
            }
          }
        },
        "401": {
          "description": "üîí Authentication failed",
          "content": {
            "application/json": {
              "examples": {
                "userNotFound": {
                  "summary": "Email not registered",
                  "value": {
                    "error": "User not found"
                  }
                },
                "invalidPassword": {
                  "summary": "Incorrect password",
                  "value": {
                    "error": "Invalid password"
                  }
                }
              }
            }
          }
        },
        "400": {
          "description": "‚ö†Ô∏è Invalid request format or unexpected error",
          "content": {
            "application/json": {
              "example": {
                "error": "Invalid request body"
              }
            }
          }
        },
        "500": {
          "description": "üí• Internal server error ‚Äî Failed to process login",
          "content": {
            "application/json": {
              "example": {
                "error": "Internal Server Error"
              }
            }
          }
        }
      }
    }
  }
}