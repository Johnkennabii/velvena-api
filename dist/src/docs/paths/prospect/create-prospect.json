{
    "/prospects": {
        "post": {
            "tags": ["Prospects"],
            "summary": "Create a new prospect",
            "description": "Creates a new prospect record with optional dress reservations. When dress reservations are included, the response will contain the full details of each dress, rental period, number of days, estimated cost per dress, and total estimated cost.",
            "operationId": "createProspect",
            "security": [{ "bearerAuth": [] }],
            "requestBody": {
                "required": true,
                "content": {
                    "application/json": {
                        "schema": { "$ref": "#/components/schemas/CreateProspectRequest" },
                        "examples": {
                            "withoutDresses": {
                                "summary": "Prospect without dress reservations",
                                "value": {
                                    "firstname": "Sophie",
                                    "lastname": "Martin",
                                    "email": "sophie.martin@email.fr",
                                    "phone": "+33612345678",
                                    "country": "France",
                                    "city": "Lyon",
                                    "address": "15 Rue de la R√©publique",
                                    "postal_code": "69002",
                                    "status": "new",
                                    "source": "website",
                                    "notes": "Int√©ress√©e par les robes de soir√©e"
                                }
                            },
                            "withDresses": {
                                "summary": "Prospect with dress reservations",
                                "value": {
                                    "firstname": "Sophie",
                                    "lastname": "Martin",
                                    "email": "sophie.martin@email.fr",
                                    "phone": "+33612345678",
                                    "country": "France",
                                    "city": "Lyon",
                                    "address": "15 Rue de la R√©publique",
                                    "postal_code": "69002",
                                    "status": "new",
                                    "source": "website",
                                    "notes": "Int√©ress√©e par les robes de soir√©e",
                                    "dress_reservations": [
                                        {
                                            "dress_id": "7d2f6f3a-18c5-43aa-812e-8df1b0b61f6f",
                                            "rental_start_date": "2025-06-15",
                                            "rental_end_date": "2025-06-17",
                                            "notes": "Pr√©f√®re essayer avant location"
                                        },
                                        {
                                            "dress_id": "0b00222f-851e-4a7a-9e52-439b820e62ae",
                                            "rental_start_date": "2025-06-15",
                                            "rental_end_date": "2025-06-17"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "responses": {
                "201": {
                    "description": "‚úÖ Prospect successfully created with dress reservations and calculations",
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/CreateProspectResponse" },
                            "example": {
                                "success": true,
                                "data": {
                                    "id": "abc123-def456",
                                    "firstname": "Sophie",
                                    "lastname": "Martin",
                                    "email": "sophie.martin@email.fr",
                                    "phone": "+33612345678",
                                    "country": "France",
                                    "city": "Lyon",
                                    "status": "new",
                                    "source": "website",
                                    "notes": "Int√©ress√©e par les robes de soir√©e",
                                    "created_at": "2025-11-30T10:00:00.000Z",
                                    "dress_reservations": [
                                        {
                                            "id": "res-001",
                                            "dress_id": "7d2f6f3a-18c5-43aa-812e-8df1b0b61f6f",
                                            "rental_start_date": "2025-06-15T00:00:00.000Z",
                                            "rental_end_date": "2025-06-17T00:00:00.000Z",
                                            "notes": "Pr√©f√®re essayer avant location",
                                            "rental_days": 3,
                                            "estimated_cost": 360,
                                            "dress": {
                                                "id": "7d2f6f3a-18c5-43aa-812e-8df1b0b61f6f",
                                                "name": "Robe de mari√©e √âl√©gance",
                                                "reference": "REF-2025-001",
                                                "price_per_day_ttc": 120,
                                                "type": { "name": "Robe de mari√©e" },
                                                "size": { "name": "M" },
                                                "color": { "name": "Blanc" }
                                            }
                                        },
                                        {
                                            "id": "res-002",
                                            "dress_id": "0b00222f-851e-4a7a-9e52-439b820e62ae",
                                            "rental_start_date": "2025-06-15T00:00:00.000Z",
                                            "rental_end_date": "2025-06-17T00:00:00.000Z",
                                            "rental_days": 3,
                                            "estimated_cost": 300,
                                            "dress": {
                                                "id": "0b00222f-851e-4a7a-9e52-439b820e62ae",
                                                "name": "Robe de soir√©e Prestige",
                                                "reference": "REF-2025-002",
                                                "price_per_day_ttc": 100,
                                                "type": { "name": "Robe de soir√©e" },
                                                "size": { "name": "L" },
                                                "color": { "name": "Noir" }
                                            }
                                        }
                                    ],
                                    "total_estimated_cost": 660
                                }
                            }
                        }
                    }
                },
                "500": {
                    "description": "üí• Server error",
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/ErrorResponse" }
                        }
                    }
                }
            }
        }
    }
}
