{
  "/prospects/{prospectId}/requests/{requestId}": {
    "patch": {
      "tags": ["Prospect Requests"],
      "summary": "Update a request",
      "description": "Updates a request (demande) - can update status, notes, or replace all dresses. When dresses are updated, calculations are automatically recalculated.",
      "operationId": "updateProspectRequest",
      "security": [{ "bearerAuth": [] }],
      "parameters": [
        {
          "name": "prospectId",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "description": "The prospect ID"
        },
        {
          "name": "requestId",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string",
            "format": "uuid"
          },
          "description": "The request ID"
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": { "$ref": "#/components/schemas/UpdateProspectRequestRequest" },
            "examples": {
              "updateStatus": {
                "summary": "Update only status",
                "value": {
                  "status": "sent"
                }
              },
              "updateNotes": {
                "summary": "Update only notes",
                "value": {
                  "notes": "Client confirm√© pour le 15 d√©cembre"
                }
              },
              "updateDresses": {
                "summary": "Update dresses (replaces all)",
                "value": {
                  "dresses": [
                    {
                      "dress_id": "7d2f6f3a-18c5-43aa-812e-8df1b0b61f6f",
                      "rental_start_date": "2025-12-12",
                      "rental_end_date": "2025-12-18",
                      "notes": "Dates modifi√©es"
                    }
                  ]
                }
              },
              "updateAll": {
                "summary": "Update status, notes and dresses",
                "value": {
                  "status": "confirmed",
                  "notes": "Client confirm√©",
                  "dresses": [
                    {
                      "dress_id": "7d2f6f3a-18c5-43aa-812e-8df1b0b61f6f",
                      "rental_start_date": "2025-12-12",
                      "rental_end_date": "2025-12-18"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "responses": {
        "200": {
          "description": "‚úÖ Request successfully updated",
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UpdateProspectRequestResponse" }
            }
          }
        },
        "400": {
          "description": "‚ùå Bad request - invalid data",
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ErrorResponse" }
            }
          }
        },
        "404": {
          "description": "‚ùå Request not found",
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ErrorResponse" }
            }
          }
        },
        "500": {
          "description": "üí• Server error",
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ErrorResponse" }
            }
          }
        }
      }
    }
  }
}
